# default config settings -- used across all environments,
# unless overridden in other propsfiles

instituteLogoBaseDirectory=/image/logo/
pHPlanTemplateImageBaseDirectory=/image/PHPlanTemplateImage/
helpPhoneNumber=1223 790708 ext: 2
helpWebSite=www.patientsknowbest.com/contact-us
helpName=Patients Know Best Help Team

withingsOauthKey=53de0538e3403e0fd60ded89373e12746c41514db96efd26349617eef247
withingsOauthSecret=d2f799d2cd171574c2d618dec0239f7c7b85bcce394d5eed03ec601e90351f

vitaDockOauthKey=NAiZZDJ1oyzfYGM4SCzjUNF49T6tKoZfNYi2U4jzNpUfZ8jEYwxph73bND8uK6z7
vitaDockOauthSecret=bKXvq01UcYT5aYuolZWS4pP5cm35P9Sy2Xd9BWMvf9WJkcPcX6kqJjgTexzaJoA1

radiologyReportExtractLength=100
recipientColumnSize=3
inboxPageSize=20
patientFilesPerPage=100
patientDiaryEntriesPerPage=20
thumbnailImageWidth=400
thumbnailImageHeight=400
thumbnailImageFormat=png

fromEmailName=Patients Know Best
fromEmailAddress=no-reply@patientsknowbest.com
testEmailId=test@pkbtest.com

fileChunkSizeInBytes=4194304
docDeleteBatchSize=5
docDeleteIntervalInHours=8
pkbLogoURL=images/logo_pkb.gif

useProxy=false
useHTTPForS3=false

smtpHostname=phr-smtp
smtpPort=25
smtpAuth=false
smtpStartTlsEnable=false
smtpSocketFactoryClass=java.lang.Object
smtpSocketFactoryFallback=java.lang.Object

coreDevicesOrganizationId=52f3f278e5af479118000007
coreDevicesAccessToken=01e3a54917b74cb3a7d41d7ad9f6f401a443c2c2cb82de06e4621ac16585bcd9

emisEsFailureGracePeriodHours=24
sciStoreEndpoint=
emisEsJobCron=0 0 */4 ? * * *
# sciStore jobs should never run outside of prod uk
sciStoreNotificationCron = 59 59 23 31 12 ? 2099 
sciStorePatientSyncCron= 59 59 23 31 12 ? 2099
childBirthNotificationCron=0 0 1 * * ?
expiredConsentRemoverCron=0 0 1 * * ?
symptomsNotificationCron=0 0 1 * * ?
unreadNotificationCron=0 0 1 * * ?

libraryUploadBaseDirectory=/pkb/image/library/
imageUploadLogoBaseDirectory=/pkb/image/logo
imageUploadPHPlanTemplateImageBaseDirectory=/pkb/image/PHPlanTemplateImage
com.pkb.upload.maxFileSize = 10000000000
com.pkb.upload.maxFileText = 10
com.pkb.upload.maxImageFileSize = 1000000000
com.pkb.upload.maxImageFileText = 1 GB
com.pkb.upload.maxGeneticsFileSize = 1000000000
com.pkb.upload.maxGeneticsFileTextGB = 1
com.pkb.upload.maxPlanFileSize = 20000000
com.pkb.upload.maxPlanFileTextMB = 20
com.pkb.upload.ComposeMessage.maxFileSize=10000000000
com.pkb.upload.ComposeMessage.maxFileText=10 GB
com.pkb.patient.invitation.maxBulkInvitationOutcomeReport=300
emisEsCsvEncoding = US-ASCII
integrations.emis.csv.sort=false
com.pkb.test.testTeamCoord=pingupenguin@pkbtest.com
com.pkb.test.testClinician=paulpenguin@pkbtest.com
com.pkb.test.testPatient=florencepenguin@pkbtest.com
orgAdminDashboardPageSize=25
accessLogPageSize=30
latestResultsInitialThreshold=2000
highchartsThreshold=10000
useUTCInHighcharts=false
integration.scistore.newpatientlimit=0
feature.2fa.enabled=true
feature.2fa.restrict.to.pkb=true
feature.privacyofficer.registration.enabled=true
feature.emis.es.enabled=false
feature.medmij_getmydata.link.enabled=false
feature.medmij_getmydata.restrict_to_team_code=
feature.medmij_getmydata.link.baseurl=
baseURL=http://localhost
emis.sso.monitoring.prof.email=emis.sso.auth.request@patientsknowbest.com
emisEsBatchSize=1000
massConsultationBatchSize=10000

# latest x measurements loaded for the sparklines on the measurements list page
myMeasurementsDefaultFetchSize=100
# latest X measurements loaded by default for the measurement history page
measurementHistoryDefaultFetchSize=1000

# Specifies in FHIR Capabily Statement if we should show our FHIR API as experimental (Optional, default value: false)
#fhir.api.experimental=true

# Toggles feature switch for SPA based Patient Banner (Optional, default value: true)
# True means, that new Patient Banner should be displayed for approproiate User types.
# feature.patientbanner.enabled=false
# Struts Action is going to fetch index.html contents from here (Mandatory, no default value is specified)
# docker network dns is accepted.
timelineFrontendFetchURL=

# App is exposed on a domain e.g.: my.patientsknowbest.com (Mandatory, no default value is specified)
# SPA static resources will be server under a path on that domain.
timelineFrontendBrowserBaseURL=

# Specifies how long SPA index.html contests should be cached in WF, before re-fetching it. (Mandatory, no default value is specified)
# Value specified is interprested as seconds. Zero value disables caching.
timelineHtmlExpiryInSeconds=0

# Feature switch for angular based Timeline. If this is set to false, no Timeline components will be used.
# feature.timeline.enabled=true

# Feature switches for individual timeline components.
# feature.timeline.calendar.enabled=false
# feature.timeline.tests.enabled=true
# feature.timeline.radiology.enabled=true
# feature.timeline.symptoms.enabled=false
# feature.timeline.measurements.enabled=false

# Request timeout in millis for Timeline FHIR requests. Timeline will get into error state and wont be displayed at all on first timed out request. Should be set to high value.
# feature.timeline.request.timeout=10000

# OAuth client id to be used when we want to exchange user's credentials
# to access_token, refresh_token pairs (Mandatory, No default is specified)
# this user must be granted able to user password_grant grant_type
# (this is ok, since as this client is PKB's own and allowed to only work from safe inner networks).
#com.pkb.api.util.DefaultInternalAccessTokenIssuer.clientId=pkb-spa-user

# Mandatory, default value: 21000 (21 seconds -- 2 * request timeout error + 1 second)
# Specifies how long we wait before we assume that something went horribly
# wrong with our SPA bootstrapping (can be network error or a bug the only manifest
# itself in very rare cases that jeopardises SPA loading to an extent that
# its built in error handling mechanism can't kick in).
#feature.patientbanner.errorTimeoutMillis=

# Turns on/off client side error reporting to 3rd party provider rollbar.com
# default is false: don't send client side errors to rollbar
# false turns off for all new clients
#feature.rollbar.enabled=true

# Sets the environment to report from this system
# Conditional; mandatory when feature.rollbar.enabled is set to true.
# Has no sensible default value. Any value is accepted, but use something like produk, prodnl, ukuat, test, dev
#feature.rollbar.environment=produk

# Sets the endpoint to where error reports should be sent.
# In production we are likely to proxy these calls through our own
# servers as we have users whom are behind restrictive firewalls.
# Conditional; mandatory when feature.rollbar.enabled is set to true.
# Default value: ${baseURL}/_errors/api/1/item/
#feature.rollbar.endpoint=${baseURL}/_errors/api/1/item/

# Experimental API for a Privacy Office to disable sharing for patients in bulk
# Disabled except for test envs, for now: see https://pkbdev.atlassian.net/browse/PHR-5277
feature.bulkdisablesharing.enabled=false
feature.bulkdisablesharing.supportedOrgCode=
feature.bulkdisablesharing.patientIds=

validicConnectionTimeoutMillis=30000
validicReadTimeoutMillis=30000

labtestsonlineRefURL=https://labtestsonline.org.uk/understanding/analytes/
labtestsonlineSearchURL=https://labtestsonline.org.uk/search?keywords=
helpTextURL=https://help.patientsknowbest.com/
csrf.protection.enabled=true
feature.scistore.enabled=false

trackingEnabled=false
menudataQueryBatchSize=5000
dbQueryBatchSize=10000
clientCachingOfStaticFiles=true


security.hl7.whitelist.enabled=true
security.test.users.enabled=false

numberOfRecentLoginAttemptsAllowed=10
definitionOfRecentLoginAttemptInSeconds=300

# This should dynamically reflect whether or not this is a test server or a production server.
#fhir.api.experimental=true

# Enables/disables FHIR resources one by one
# Uncomment to change on default.
# Expose Patient resource (default: true)
#fhir.api.Patient.enabled=false
# Expose Practitioner resource (default: true)
#fhir.api.Practitioner.enabled=false
# Expose NamingSystem resource (default: true)
#fhir.api.NamingSystem.enabled=false
# Expose Consent resource (default: true)
#fhir.api.Consent.enabled=false
# Expose purview operation (default: true)
#fhir.api.purview.enabled=false
# Expose Person resource (default: false)
#fhir.api.Person.enabled=false
# Expose DocumentReference resource (default: true)
#fhir.api.DocumentReference.enabled=false
# Expose Observation resource (default: true)
#fhir.api.Observation.enabled=false
## Observation cap size (default: 60.000)
## Below options controls how many Observations (laboratory tests results ATM)
## we allow to fetch from DB.
## It meant to protect us from fetching too much data (consuming too
## much resources). However, at the moment we don't have any means
## to signal on the UI that we truncated the data, thus we need to set a cap size
## which allows us to retrun all observations.
## Recent stats showed, that we have at least one user with a total of ~50k lab results.
#fhir.api.Observation.maxNumberOfResources=
# Expose DiagnosticReport resource (default: true)
#fhir.api.DiagnosticReport.enabled=false
# Expose Communication resource (default: true)
#fhir.api.Communication.enabled=false
# Expose Encounter resource (default: true)
#fhir.api.Encounter.enabled=false

ui.autosaveTimeoutInMilliseconds=60000

# Enables/disables virus scanning of uploaded files (default: enabled).
#clamav.scanning.enabled=false
#
# Hostname of Anti Virus Service (default: clamav).
#clamav.host=

# Forces http cookies to be secure (only can be set over https) (default: true)
#feature.enforce.secure.cookies=false

# Current implementation of org networking consists of two main phases:
# 1. Queue in Patient records into orgnetworksyncqueue table and
# 2. Kicks of account key syncronization so each org can have their own
#    copy of the Patient's account private key.
# In the current implementation the first step can take a lot of time
# when an org has a lot of Patients.
# Use this property to overwrite the default 5 minutes transaction timeout.
#orgnetwork.sync.transaction.timeout.seconds=1800

# On accessing data via FHIR API we also need to make sure that data sync happens.
# We do this making an HTTP call to a struts action specifically made for this: synchUploadedData.action
# Below parameters control timeout parts for this functionality:
# connection timeout: 10 seconds (default)
#fhir.api.to.struts.connectiontimeout.milliseconds=10000
# write request: 10 seconds (default)
#fhir.api.to.struts.write.milliseconds=10000
# read response: 2 minutes (default)
#fhir.api.to.struts.read.milliseconds=120000
# Controls whether com.pkb.app.bean.strategies.accountkey.KMSAccountKeyLoadingStrategy tries to load from KMS before
# passing through to the existing local handler
kms.key.loading.enabled=false
kms.baseurl=http://kms:8080

# Controls if an exception is thrown or a warning is logged when default account id field is null on pkbperson entity during an update.
# Optional. Default value is false in prod.
#consistency.check.pkbperson.defaultaccountid.null.exception=true

# TODO: delete once https://pkbdev.atlassian.net/browse/PHR-2462 is complete and this state cannot manifest in DB.
# Controls if an exception is thrown or a warning is logged when there are multiple accounts created for a sinlge national id.
# E.g.: Given an NHS Number (for UK deployement) as of 6th of Jan, 2020 the DB allows multiple - completly valid - accounts to
# exist for a single ID (For more background see: PHR-2462).
# Optional. Default value is false in prod.
#consistency.check.multiple.account.for.single.national.id.exception=true

#8082
portMapping.http=8081
portMapping.https=9443

# NHS Login related properties. Uncomment to change on default.
# Enables/disables logging into PKB with NHS Login (default: false)
#feature.nhslogin.enabled=true
# Displays/hides NHS Login button on PKB login form (default: false)
#nhslogin.webui.button.enabled=true
# Internal path that redirects browser to NHS authorization server (Conditionally mandatory, when nhslogin.webui.button.enabled is true)
# Our OpenID client is reponsible for the oauth dance (default /nhs-login/login).
# nhslogin.integration.path=

# Enables a warning at the point of booking an appointment and confirming the booking of an appointment.
# Currently this displays a sanctioned warning about coronavirus, but it could be used for other messages in future.
# This is optional and defaulted to false as it is not turned on for e.g. NL prod. We've cherry picked where we want to turn it on.
# feature.bookAppointmentWarning.visible=false
